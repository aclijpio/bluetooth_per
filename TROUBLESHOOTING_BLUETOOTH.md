# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é Bluetooth –ø—Ä–æ–±–ª–µ–º

## –ü—Ä–æ–±–ª–µ–º–∞: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞

### üîç –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

#### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Java –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (BluetoothSender)

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```powershell
.\check_java_app.ps1
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:**
```bash
adb logcat | grep "BluetoothServer"
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –ª–æ–≥–∞—Ö:**
```
BluetoothServerService: onCreate: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è BluetoothServerService
BluetoothServerManager: start: –ó–∞–ø—É—Å–∫ Bluetooth —Å–µ—Ä–≤–µ—Ä–∞
BluetoothServerManager: start: –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω, –æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
```

#### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π:**
```bash
flutter run
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Flutter:**
```bash
flutter logs | grep "Bluetooth"
```

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

**–ù–∞ Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å Java –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí BluetoothSender
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è:
   - ‚úÖ Bluetooth
   - ‚úÖ –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
   - ‚úÖ –§–∞–π–ª—ã –∏ –º–µ–¥–∏–∞

**–ù–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º:**
1. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∏—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã:
   - ‚úÖ Bluetooth Scan
   - ‚úÖ Bluetooth Connect
   - ‚úÖ –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ

#### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ Bluetooth –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–ù–∞ –æ–±–æ–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö:**
1. –í–∫–ª—é—á–∏—Ç–µ Bluetooth
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –≤ —Ä–µ–∂–∏–º–µ –ø–æ–ª–µ—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Bluetooth –≤–∏–¥–∏–º—ã–π (Discoverable)

### üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: "Bluetooth –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
**–ü—Ä–∏—á–∏–Ω–∞:** Bluetooth –≤—ã–∫–ª—é—á–µ–Ω –∏–ª–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
- –í–∫–ª—é—á–∏—Ç–µ Bluetooth –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Bluetooth Classic

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: "–†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã"
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∏–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí [–ò–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è] ‚Üí –†–∞–∑—Ä–µ—à–µ–Ω–∏—è
- –í–∫–ª—é—á–∏—Ç–µ –≤—Å–µ Bluetooth –∏ Location —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
**–ü—Ä–∏—á–∏–Ω–∞:** –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ
**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Java –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `adb logcat | grep "BluetoothServer"`
3. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 10 –º–µ—Ç—Ä–æ–≤
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Bluetooth –≤–∫–ª—é—á–µ–Ω –Ω–∞ –æ–±–æ–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

#### –ü—Ä–æ–±–ª–µ–º–∞ 4: "–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è"
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏ –∏–ª–∏ Bluetooth –∞–¥–∞–ø—Ç–µ—Ä–æ–º
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Java –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Bluetooth –∞–¥–∞–ø—Ç–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç

#### –ü—Ä–æ–±–ª–µ–º–∞ 5: "–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç—ã
**–†–µ—à–µ–Ω–∏–µ:**
1. –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
2. –£–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ —Å–ø—è—â–∏–π —Ä–µ–∂–∏–º
4. –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã –≤ –∫–æ–¥–µ

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ Bluetooth –∞–¥–∞–ø—Ç–µ—Ä–∞
```bash
# –ù–∞ Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
adb shell dumpsys bluetooth | grep "BluetoothAdapter"
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö Bluetooth —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
```bash
adb shell dumpsys bluetooth | grep "Connected"
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ Bluetooth —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
adb shell dumpsys bluetooth | grep "Service"
```

### üì± –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

#### Android 12+ (API 31+)
- –¢—Ä–µ–±—É—é—Ç—Å—è –Ω–æ–≤—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è: `BLUETOOTH_SCAN`, `BLUETOOTH_CONNECT`
- –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

#### Android 11 –∏ –Ω–∏–∂–µ
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç–∞—Ä—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è: `BLUETOOTH`, `BLUETOOTH_ADMIN`
- –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç–∞–∫–∂–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã

#### iOS
- –¢—Ä–µ–±—É–µ—Ç—Å—è `NSBluetoothAlwaysUsageDescription` –≤ Info.plist
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ Bluetooth

### üõ†Ô∏è –û—Ç–ª–∞–¥–∫–∞

#### –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–í Java –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**
```java
Log.d(TAG, "–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: " + data);
```

**–í Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**
```dart
print('üîç [BluetoothManager] –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: $data');
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Bluetooth –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
adb shell ip link show
```

### üìû –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:

1. **–°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏:**
   ```bash
   adb logcat > bluetooth_logs.txt
   flutter logs > flutter_logs.txt
   ```

2. **–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã:**
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Bluetooth
   - –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
   - –û—à–∏–±–∫–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö

3. **–û–ø–∏—à–∏—Ç–µ:**
   - –í–µ—Ä—Å–∏–∏ Android –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
   - –ú–æ–¥–µ–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
   - –®–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

### ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] Bluetooth –≤–∫–ª—é—á–µ–Ω –Ω–∞ –æ–±–æ–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] Java –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Server started"
- [ ] Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–∏–ª–æ –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- [ ] –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ä—è–¥–æ–º (–¥–æ 10 –º–µ—Ç—Ä–æ–≤)
- [ ] –ù–µ—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- [ ] –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –≤ —Ä–µ–∂–∏–º–µ –ø–æ–ª–µ—Ç–∞
- [ ] Bluetooth –∞–¥–∞–ø—Ç–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö Bluetooth —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π 